@model AnagramSolver.WebApp.Models.AnagramViewModel

<h2>Anagramų paieška </h2> @if (!string.IsNullOrWhiteSpace(ViewBag.LastSearch))
{
    <p>Paskutinė paieška: @ViewBag.LastSearch</p>
}

<form asp-controller="Home" asp-action="Index" asp-route-id="" method="get">
    <input type="text" name="id" value="@Model.Query" placeholder="Įveskite žodį" />
    <button type="submit">Ieškoti</button>
</form>

@if (!string.IsNullOrWhiteSpace(Model.Error))
{
    <p style="color:red">@Model.Error</p>
}
else if (Model.Results.Count > 0)
{
    <h3>Anagramos:</h3>
    <ul>
        @foreach(var w in Model.Results)
        {
            <li>@w</li>
        }
    </ul>
}

else if (!string.IsNullOrWhiteSpace(Model.Query))
{
    <p>Anagramų nerasta</p>
}

@* <script>
    const key = `anagram_${Model.Query}`;
    const cached = localStorage.getItem(key);

    if (cached) {
        displayResults(JSON.parse(cached));
    } else {
        fetch(`/api/anagrams/${Model.Query}`)
            .then(r => r.json())
            .then(data => {
                localStorage.setItem(key, JSON.stringify(data));
                displayResults(data);
            });
    }

</script> *@